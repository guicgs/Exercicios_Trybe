(this["webpackJsonplearn-react-hooks"]=this["webpackJsonplearn-react-hooks"]||[]).push([[33],{101:function(e,n,t){"use strict";t.d(n,"a",(function(){return f}));var a=t(0),o=t.n(a);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=o.a.createContext({}),p=function(e){var n=o.a.useContext(l),t=n;return e&&(t="function"===typeof e?e(n):c({},n,{},e)),t},u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},d=Object(a.forwardRef)((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),d=p(t),f=a,h=d["".concat(s,".").concat(f)]||d[f]||u[f]||r;return t?o.a.createElement(h,c({ref:n},l,{components:t})):o.a.createElement(h,c({ref:n},l))}));function f(e,n){var t=arguments,a=n&&n.mdxType;if("string"===typeof e||a){var r=t.length,s=new Array(r);s[0]=d;var c={};for(var i in n)hasOwnProperty.call(n,i)&&(c[i]=n[i]);c.originalType=e,c.mdxType="string"===typeof e?e:a,s[1]=c;for(var l=2;l<r;l++)s[l]=t[l];return o.a.createElement.apply(null,s)}return o.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},102:function(e,n,t){"use strict";function a(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}t.d(n,"a",(function(){return a}))},73:function(e,n,t){"use strict";t.r(n),t.d(n,"readingTime",(function(){return r})),t.d(n,"default",(function(){return c})),t.d(n,"tableOfContents",(function(){return i})),t.d(n,"frontMatter",(function(){return l}));var a=t(102),o=(t(0),t(101)),r={text:"3 min read",minutes:2.13,time:127800,words:426},s={};function c(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(o.a)("wrapper",Object.assign({},s,t,{components:n,mdxType:"MDXLayout"}),Object(o.a)("h1",{id:"useref-and-useeffect-dom-interaction"},"useRef and useEffect: DOM interaction"),Object(o.a)("h2",{id:"background"},"Background"),Object(o.a)("p",null,"Often when working with React you\u2019ll need to integrate with UI libraries. Some\nof these need to work directly with the DOM. Remember that when you do:\n",Object(o.a)("inlineCode",{parentName:"p"},"<div>hi</div>")," that\u2019s actually syntactic sugar for a ",Object(o.a)("inlineCode",{parentName:"p"},"React.createElement")," so\nyou don\u2019t actually have access to DOM nodes in your render method. In fact, DOM\nnodes aren\u2019t created at all until the ",Object(o.a)("inlineCode",{parentName:"p"},"ReactDOM.render")," method is called. Your\ncomponent\u2019s render method is really just responsible with creating and returning\nReact Elements and has nothing to do with the DOM in particular."),Object(o.a)("p",null,"So to get access to the DOM, you need to ask React to give you access to a\nparticular DOM node when it renders your component. The way this happens is\nthrough a special prop called ",Object(o.a)("inlineCode",{parentName:"p"},"ref"),"."),Object(o.a)("p",null,"Here\u2019s a simple example of using the ",Object(o.a)("inlineCode",{parentName:"p"},"ref")," prop:"),Object(o.a)("pre",null,Object(o.a)("code",Object.assign({parentName:"pre"},{className:"language-javascript","data-language":"javascript","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">function</span> <span class="token function">MyDiv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> myDivRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> myDiv <span class="token operator">=</span> myDivRef<span class="token punctuation">.</span>current\n    <span class="token comment">// myDiv is the div DOM node!</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myDiv<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span>myDivRef<span class="token punctuation">}</span><span class="token operator">></span>hi<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n<span class="token punctuation">}</span>\n'}}))),Object(o.a)("p",null,"After the component has been rendered, it\u2019s considered \u201cmounted.\u201d That\u2019s when\nthe React.useEffect callback is called and so by that point, the ref should have\nits ",Object(o.a)("inlineCode",{parentName:"p"},"current")," property set to the DOM node. So often you\u2019ll do direct DOM\ninteractions/manipulations in the ",Object(o.a)("inlineCode",{parentName:"p"},"useEffect")," callback."),Object(o.a)("h2",{id:"exercise"},"Exercise"),Object(o.a)("p",null,"In this exercise we\u2019re going to make a ",Object(o.a)("inlineCode",{parentName:"p"},"<Tilt />")," component that renders a div\nand uses the ",Object(o.a)("inlineCode",{parentName:"p"},"vanilla-tilt")," library to make it super fancy."),Object(o.a)("p",null,"The thing is, ",Object(o.a)("inlineCode",{parentName:"p"},"vanilla-tilt")," works directly with DOM nodes to setup event\nhandlers and stuff, so we need access to the DOM node. But because we\u2019re not the\none calling ",Object(o.a)("inlineCode",{parentName:"p"},"document.createElement")," (React does) we need React to give it to\nus."),Object(o.a)("p",null,"So in this exercise we\u2019re going to use a ",Object(o.a)("inlineCode",{parentName:"p"},"ref")," so React can give us the DOM node\nand then we can pass that on to ",Object(o.a)("inlineCode",{parentName:"p"},"vanilla-tilt"),"."),Object(o.a)("p",null,"Additionally, we\u2019ll need to clean up after ourselves if this component is\nunmounted. Otherwise we\u2019ll have event handlers dangling around on DOM nodes that\nare no longer in the document."),Object(o.a)("h3",{id:"alternate"},"Alternate:"),Object(o.a)("p",null,"If you\u2019d prefer to practice refactoring a class that does this to a hook, then\nyou can open ",Object(o.a)("inlineCode",{parentName:"p"},"src/exercise/05-classes.js")," and open that on an isolated page to\npractice that."),Object(o.a)("h2",{id:"extra-credit"},"Extra Credit"),Object(o.a)("h3",{id:"-make-a-custom-hook"},"\ud83d\udcaf Make a custom hook"),Object(o.a)("p",null,"I want a custom hook that I can call like this: ",Object(o.a)("inlineCode",{parentName:"p"},"useTilt(ref, options)"),"."),Object(o.a)("h2",{id:"\ud83e\udd89-elaboration-and-feedback"},"\ud83e\udd89 Elaboration and Feedback"),Object(o.a)("div",null,Object(o.a)("span",null,"After the instruction, if you want to remember what you've just learned, then "),Object(o.a)("a",{rel:"noopener noreferrer",target:"_blank",href:"https://ws.kcd.im/?ws=React%20Hooks%20%F0%9F%8E%A3&e=05%3A%20useRef%20and%20useEffect%3A%20DOM%20interaction&em="},"fill out the elaboration and feedback form.")))}c.isMDXComponent=!0;var i=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[{id:"background",level:2,title:"Background",children:[]},{id:"exercise",level:2,title:"Exercise",children:[{id:"alternate",level:3,title:"Alternate:",children:[]}]},{id:"extra-credit",level:2,title:"Extra Credit",children:[{id:"-make-a-custom-hook",level:3,title:"\ud83d\udcaf Make a custom hook",children:[]}]},{id:"\ud83e\udd89-elaboration-and-feedback",level:2,title:"\ud83e\udd89 Elaboration and Feedback",children:[]}]},l={}}}]);
//# sourceMappingURL=33.15be6fcd.chunk.js.map